# 插件系统

## 插件安装

AIaW 有几个内置的插件。此外，你可以在[插件市场](https://aiaw.app/plugins)安装更多的插件；你也可以通过点击插件市场页面右上角加号，手动添加插件配置文件。

## 插件设置

通过插件市场右侧边栏的「已安装插件」列表，你可以进入每个插件的设置页面。在这里可以设置每个插件的图表、禁用/启用文件解析器、调整调用参数等（如果有的话）。这是插件的全局设置。

此外，在助手页面启用插件后，可以进入插件功能页面。在那里可以禁用/启用插件的某个工具、修改变量值（如果有的话）。此设置仅对当前助手有效。

## 插件功能

在 AIaW，「工具」只是「插件」的一部分，一个插件可以有多个工具，除此之外还可以有文件解析器、提示词和信息获取。仅有文件解析器/提示词而没有工具的插件也是可以的。

### 工具调用

插件最常见的作用就是，为 AI 提供工具调用，以拓展其能力。

比如，提供一个计算器，让 AI 可以调用它进行计算，这样 AI 就能够完成更复杂的计算，同时也保证了计算的准确性。AIaW 内置了一个「计算器」插件，你可以直接在助手设置中启用它。

再比如，提供调用图像生成模型的能力，这样就可以直接告诉 AI 你想要画什么，AI 就会自己编写提示词，生成图像。内置的「图像生成: FLUX」就是这样一个插件，并且它通过 HuggingFace Spaces 调用，因此无需配置且免费。

### 文件解析器

除了工具调用外，AIaW 的插件还提供文件解析器。详见[文件解析](file-parse)页面

### 提示词

此外，插件本身还可以包含提示词。这里的「提示词」有别于工具的提示词，工具的提示词一般作为工具函数的 `description` 传递给模型。而插件的提示词是独立于工具的，它将作为提示词模板中 `_pluginsPrompt` 的一部分，放入系统提示词中。

因此，插件也可以仅包含提示词而没有文件解析器和工具。内置的「表情包」插件和「Mermaid 图表」插件就是这样的。

表情包插件的原理为，AIaW 内置了一些表情包图片，因此只需要告诉 AI 每个表情包的链接，提示 AI 在回答中使用 img 标签引入图片就行了。而 Mermaid 图表也是 AIaW 的 Markdown 渲染组件本来就支持的，只需要提示 AI 在回答中使用即可。当然，把提示写在角色设定或者用户消息里也是一样的，把它封装为插件只是为了使用起来更方便些。

插件提示词也支持提示词变量。比如表情包插件就有一个「显示大小」变量，它可以插件功能页面调整；提示词中使用了它，告诉了 AI 设定 img 标签的宽度，从而影响表情包的显示大小。

## 插件配置与开发

参考[插件配置与开发](plugin-dev)
